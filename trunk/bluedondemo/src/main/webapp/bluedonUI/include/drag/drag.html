<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>拖动</title>
<!--公共-->
<link href="../../skin/style/style.css" rel="stylesheet" type="text/css" />
<script src="../../js/lib/jquery.min.js" type="text/javascript"></script>

<script src="../../js/lib/tab/tab.js" type="text/javascript"></script>
<!--拖动-->
<script type="text/javascript" src="../../js/lib/drag/drag.js"></script>
<link href="../../js/lib/drag/drag.css" rel="stylesheet" type="text/css" />
<!--代码变色-->
<script src="../../js/lib/vejis.js" type="text/javascript"></script>
<script src="../../js/lib/vlight.js" type="text/javascript"></script>
</head>

<body>

	<div class="item_container">
		<div class="item_content">
			<ul>
				<li>
					<div class="item_drag">
						<div class="index_box">
		<h3 class="m_title">窗口1</h3>
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table">
                      <tr>
                        <th>网口</th>
                        <th>状态</th>
                        <th>IP地址</th>
                      </tr>
                      <tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
						<tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
                    </table>
                    <div class="clearfix"></div>
	</div>
					</div>
				</li>
				
				<li>
					<div class="item_drag">
						<div class="index_box">
		<h3 class="m_title">窗口2</h3>
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table">
                      <tr>
                        <th>网口</th>
                        <th>状态</th>
                        <th>IP地址</th>
                      </tr>
                      <tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
						<tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
                    </table>
                    <div class="clearfix"></div>
	</div>
					</div>
				</li>
				
				<li>
					<div class="item_drag">
						<div class="index_box">
		<h3 class="m_title">窗口3</h3>
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table">
                      <tr>
                        <th>网口</th>
                        <th>状态</th>
                        <th>IP地址</th>
                      </tr>
                      <tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
						<tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
                    </table>
                    <div class="clearfix"></div>
	</div>
					</div>
				</li>
				
				<li>
					<div class="item_drag">
						<div class="index_box">
		<h3 class="m_title">窗口4</h3>
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table">
                      <tr>
                        <th>网口</th>
                        <th>状态</th>
                        <th>IP地址</th>
                      </tr>
                      <tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
						<tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
                    </table>
                    <div class="clearfix"></div>
	</div>
					</div>
				</li>
				
				
				<li>
					<div class="item_drag">
						<div class="index_box">
		<h3 class="m_title">窗口5</h3>
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table">
                      <tr>
                        <th>网口</th>
                        <th>状态</th>
                        <th>IP地址</th>
                      </tr>
                      <tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
						<tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
                    </table>
                    <div class="clearfix"></div>
	</div>
					</div>
				</li>
				
				
				<li>
					<div class="item_drag">
						<div class="index_box">
		<h3 class="m_title">窗口6</h3>
		<table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table">
                      <tr>
                        <th>网口</th>
                        <th>状态</th>
                        <th>IP地址</th>
                      </tr>
                      <tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
						<tr>
                        <td>eth0</td>
                        <td><font class="e1"></font></td>
                        <td>192.168.3.254/24</td>
                      </tr>
                    </table>
                    <div class="clearfix"></div>
	</div>
					</div>
				</li>
				
				
			</ul>
		</div>
	</div>

<div class="clearfix"></div>    
<div style="padding:0px 20px;">
  <div class="list-data">
        <div class="list-tab mar_top">
            <ul>
            <li class="listcurrent"><a href="#html">HTML代码</a></li>
            <li><a href="#css">CSS代码</a></li>
            <li><a href="#java">JAVASCRIPT代码(含数据交互)</a></li>
            <li><a href="#date">使用说明</a></li>
        </ul>
        </div>
    </div>
     
     <div class="clearfix"></div> 
     <div class=" list-content">
		
<!--HTML代码-->
<div id="html">
<blockquote class="vlight">
<p>
<!--js文件--><br>
&lt;script src="../js/lib/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript" src="../js/lib/drag/drag.js"&gt;&lt;/script&gt;<br><br>
<!--内容显示--><br>
&lt;div class="item_container"&gt;<br>
		&lt;div class="item_content"&gt;<br>
			&lt;ul&gt;<br>
				&lt;li&gt;<br>
					&lt;div class="item_drag"&gt;<br>
						&lt;div class="index_box"&gt;<br>
		&lt;h3 class="m_title"&gt;窗口1&lt;/h3&gt;<br>
		&lt;table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table"&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;th&gt;网口&lt;/th&gt;<br>
                        &lt;th&gt;状态&lt;/th&gt;<br>
                        &lt;th&gt;IP地址&lt;/th&gt;<br>
                      &lt;/tr&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;<br>192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
						&lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
                    &lt;/table&gt;<br>
                    &lt;div class="clearfix"&gt;&lt;/div&gt;<br>
	&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/li&gt;<br>
				
				&lt;li&gt;<br>
					&lt;div class="item_drag"&gt;<br>
						&lt;div class="index_box"&gt;<br>
		&lt;h3 class="m_title"&gt;窗口2&lt;/h3&gt;<br>
		&lt;table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table"&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;th&gt;网口&lt;/th&gt;<br>
                        &lt;th&gt;状态&lt;/th&gt;<br>
                        &lt;th&gt;IP地址&lt;/th&gt;<br>
                      &lt;/tr&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
						&lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
                    &lt;/table&gt;<br>
                    &lt;div class="clearfix"&gt;&lt;/div&gt;<br>
	&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/li&gt;<br>
				
				&lt;li&gt;<br>
					&lt;div class="item_drag"&gt;<br>
						&lt;div class="index_box"&gt;<br>
		&lt;h3 class="m_title"&gt;窗口3&lt;/h3&gt;<br>
		&lt;table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table"&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;th&gt;网口&lt;/th&gt;<br>
                        &lt;th&gt;状态&lt;/th&gt;<br>
                        &lt;th&gt;IP地址&lt;/th&gt;<br>
                      &lt;/tr&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
						&lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
                    &lt;/table&gt;<br>
                    &lt;div class="clearfix"&gt;&lt;/div&gt;<br>
	&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/li&gt;<br>
				
				&lt;li&gt;<br>
					&lt;div class="item_drag"&gt;<br>
						&lt;div class="index_box"&gt;<br>
		&lt;h3 class="m_title"&gt;窗口4&lt;/h3&gt;<br>
		&lt;table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table"&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;th&gt;网口&lt;/th&gt;<br>
                        &lt;th&gt;状态&lt;/th&gt;<br>
                        &lt;th&gt;IP地址&lt;/th&gt;<br>
                      &lt;/tr&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
						&lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
                    &lt;/table&gt;<br>
                    &lt;div class="clearfix"&gt;&lt;/div&gt;<br>
	&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/li&gt;<br>
				
				
				&lt;li&gt;<br>
					&lt;div class="item_drag"&gt;<br>
						&lt;div class="index_box"&gt;<br>
		&lt;h3 class="m_title"&gt;窗口5&lt;/h3&gt;<br>
		&lt;table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table"&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;th&gt;网口&lt;/th&gt;<br>
                        &lt;th&gt;状态&lt;/th&gt;<br>
                        &lt;th&gt;IP地址&lt;/th&gt;<br>
                      &lt;/tr&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
						&lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
                    &lt;/table&gt;<br>
                    &lt;div class="clearfix"&gt;&lt;/div&gt;<br>
	&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/li&gt;<br>
				
				
				&lt;li&gt;<br>
					&lt;div class="item_drag"&gt;<br>
						&lt;div class="index_box"&gt;<br>
		&lt;h3 class="m_title"&gt;窗口6&lt;/h3&gt;<br>
		&lt;table width="100%" border="0" cellspacing="0" cellpadding="0" class="index_table"&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;th&gt;网口&lt;/th&gt;<br>
                        &lt;th&gt;状态&lt;/th&gt;<br>
                        &lt;th&gt;IP地址&lt;/th&gt;<br>
                      &lt;/tr&gt;<br>
                      &lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
						&lt;tr&gt;<br>
                        &lt;td&gt;eth0&lt;/td&gt;<br>
                        &lt;td&gt;&lt;font class="e1"&gt;&lt;/font&gt;&lt;/td&gt;<br>
                        &lt;td&gt;192.168.3.254/24&lt;/td&gt;<br>
                      &lt;/tr&gt;<br>
                    &lt;/table&gt;<br>
                    &lt;div class="clearfix"&gt;&lt;/div&gt;<br>
	&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/li&gt;<br>
				
				
			&lt;/ul&gt;<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
</p>    
</blockquote>
</div>
        
<!--CSS代码-->
<div id="css">
<blockquote class="vlight">
<p>
/**********CSS*************/<br>
&lt;link rel="stylesheet" href="../js/lib/drag/drag.css" type="text/css"&gt;
</p>
</blockquote>
</div>
        
<!--JAVASCRIPT代码-->
<div id="java">
<blockquote class="vlight">
<p>
// JavaScript Document<br>
	$(function() {<br>
		function Pointer(x, y) {<br>
			this.x = x ;<br>
			this.y = y ;<br>
		}<br>
		function Position(left, top) {<br>
			this.left = left ;<br>
			this.top = top ;<br>
		}<br>
		$(".item_content .item_drag").each(function(i) {<br>
			this.init = function() { // 初始化<br>
				this.box = $(this).parent() ;<br>
				$(this).attr("index", i).css({<br>
					position : "absolute",<br>
					left : this.box.offset().left,<br>
					top : this.box.offset().top<br>
				}).appendTo(".item_content") ;<br>
				this.drag() ;<br>
			},<br>
			this.move = function(callback) {  // 移动<br>
				$(this).stop(true).animate({<br>
					left : this.box.offset().left,<br>
					top : this.box.offset().top<br>
				}, 500, function() {<br>
					if(callback) {<br>
						callback.call(this) ;<br>
					}<br>
				}) ;<br>
			},<br>
			this.collisionCheck = function() {<br>
				var currentItem = this ;<br>
				var direction = null ;<br>
				$(this).siblings(".item_drag").each(function() {<br>
					if(<br>
						currentItem.pointer.x > this.box.offset().left &&<br>
						currentItem.pointer.y > this.box.offset().top &&<br>
						(currentItem.pointer.x < this.box.offset().left + this.box.width()) &&<br>
						(currentItem.pointer.y < this.box.offset().top + this.box.height())<br>
					) {<br>
						// 返回对象和方向<br>
						if(currentItem.box.offset().top < this.box.offset().top) {<br>
							direction = "down" ;<br>
						} else if(currentItem.box.offset().top > this.box.offset().top) {<br>
							direction = "up" ;<br>
						} else {<br>
							direction = "normal" ;<br>
						}<br>
						this.swap(currentItem, direction) ;<br>
					}<br>
				}) ;<br>
			},<br>
			this.swap = function(currentItem, direction) { // 交换位置<br>
				if(this.moveing) return false ;<br>
				var directions = {<br>
					normal : function() {<br>
						var saveBox = this.box ;<br>
						this.box = currentItem.box ;<br>
						currentItem.box = saveBox ;<br>
						this.move() ;<br>
						$(this).attr("index", this.box.index()) ;<br>
						$(currentItem).attr("index", currentItem.box.index()) ;<br>
					},<br>
					down : function() {<br>
						// 移到上方<br>
						var box = this.box ;<br>
						var node = this ;<br>
						var startIndex = currentItem.box.index() ;<br>
						var endIndex = node.box.index(); ;<br>
						for(var i = endIndex; i > startIndex ; i--) {<br>
							var prevNode = $(".item_content .item_drag[index="+ (i - 1) +"]")[0] ;<br>
							node.box = prevNode.box ;<br>
							$(node).attr("index", node.box.index()) ;<br>
							node.move() ;<br>
							node = prevNode ;<br>
						}<br>
						currentItem.box = box ;<br>
						$(currentItem).attr("index", box.index()) ;<br>
					},<br>
					up : function() {<br>
						// 移到上方<br>
						var box = this.box ;<br>
						var node = this ;<br>
						var startIndex = node.box.index() ;<br>
						var endIndex = currentItem.box.index(); ;<br>
						for(var i = startIndex; i < endIndex; i++) {<br>
							var nextNode = $(".item_content .item_drag[index="+ (i + 1) +"]")[0] ;<br>
							node.box = nextNode.box ;<br>
							$(node).attr("index", node.box.index()) ;<br>
							node.move() ;<br>
							node = nextNode ;<br>
						}<br>
						currentItem.box = box ;<br>
						$(currentItem).attr("index", box.index()) ;<br>
					}<br>
				}<br>
				directions[direction].call(this) ;<br>
			},<br>
			this.drag = function() { // 拖拽<br>
				var oldPosition = new Position() ;<br>
				var oldPointer = new Pointer() ;<br>
				var isDrag = false ;<br>
				var currentItem = null ;<br>
				$(this).mousedown(function(e) {<br>
					e.preventDefault() ;<br>
					oldPosition.left = $(this).position().left ;<br>
					oldPosition.top =  $(this).position().top ;<br>
					oldPointer.x = e.clientX ;<br>
					oldPointer.y = e.clientY ;<br>
					isDrag = true ;<br>
					
					currentItem = this ;<br>
					
				}) ;<br>
				$(document).mousemove(function(e) {<br>
					var currentPointer = new Pointer(e.clientX, e.clientY) ;<br>
					if(!isDrag) return false ;<br>
					$(currentItem).css({<br>
						"opacity" : "0.8",<br>
						"z-index" : 999<br>
					}) ;<br>
					var left = currentPointer.x - oldPointer.x + oldPosition.left ;<br>
					var top = currentPointer.y - oldPointer.y + oldPosition.top ;<br>
					$(currentItem).css({<br>
						left : left,<br>
						top : top<br>
					}) ;<br>
					currentItem.pointer = currentPointer ;<br>
					// 开始交换位置<br>
					
					currentItem.collisionCheck() ;<br>
					
					
				}) ;<br>
				$(document).mouseup(function() {<br>
					if(!isDrag) return false ;<br>
					isDrag = false ;<br>
					currentItem.move(function() {<br>
						$(this).css({<br>
							"opacity" : "1",<br>
							"z-index" : 0<br>
						}) ;<br>
					}) ;<br>
				}) ;<br>
			}<br>
			this.init() ;<br>
		}) ;<br>
	}) ;<br>
</p>
</blockquote>
</div>
        
        
<!--使用说明-->
<div id="date">
<blockquote class="vlight">
<p>
/* 数据等待添加 */

</p>
</blockquote>
</div>

        
        
    </div>

</div>

</body>
</html>
