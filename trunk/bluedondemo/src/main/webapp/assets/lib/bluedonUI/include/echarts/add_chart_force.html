<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>title</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<!--可以在收藏夹中显示出图标-->
<link rel="Bookmark" href="../../skin/style/images/favicon.ico" type="image/x-icon"/>
<!--可以在地址栏中显示出图标-->
<link rel="shortcut icon" href="../../skin/style/images/favicon.ico" type="image/x-icon"/>
<link rel="icon" href="../../skin/style/images/favicon.ico" type="image/x-icon"/>
<!--公共-->
<link href="../../skin/style/style.css" rel="stylesheet" type="text/css" />
<script src="../../js/lib/jquery.min.js" type="text/javascript"></script>
<script src="../../js/lib/tab/tab.js" type="text/javascript"></script>
<!--代码变色-->
<script src="../../js/lib/vejis.js" type="text/javascript"></script>
<script src="../../js/lib/vlight.js" type="text/javascript"></script>
<style type="text/css">
body{_overflow:hidden}
</style>
</head>

<body>

<div style="padding:0px 20px;">
  <div class="list-data">
        <div class="list-tab mar_top">
            <ul>
            <li class="listcurrent"><a href="#html">HTML代码</a></li>
            <li><a href="#css">CSS代码</a></li>
            <li><a href="#java">JAVASCRIPT代码(含数据交互)</a></li>
            <li><a href="#date">使用说明</a></li>
        </ul>
        </div>
    </div>
     
     <div class="clearfix"></div> 
     <div class=" list-content">
		
<!--HTML代码-->
<div id="html">
<blockquote class="vlight">
<p>


<!--内容显示--><br>
&lt;div id="chart_force1" style="height:200px; width:90%; overflow:hidden; margin:10px auto 0px auto;"&gt;&lt;/div&gt;<br><br>

<!--js文件--><br>
&lt;script src="../../js/lib/echarts/echarts-all.js"&gt;&lt;/script&gt;<br>
&lt;script src="../../js/lib/echarts/echarts.js"&gt;&lt;/script&gt;<br>
&lt;script src="../../js/bd/charts.js"&gt;&lt;/script&gt;<br>
&lt;script src="../../js/lib/echarts/echarts_list.js"&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript"&gt;<br>
$(document).ready(function(e) {<br>
    $("#chart_force1").chartsObj({<br>
            typecharts:'force',                 //是什么类型的报表bar,line,pie等<br>
            jsonUrl:'../../js/data/force.json',  //报表的JSON文件路径<br>
            tabID:'#chart_force1',              //调用报表的ID<br>
            trigger:'item',                   //报表的trigger类型<br>
            width:800,                      //报表显示宽度<br>
            height:240,                      //报表显示高度<br>
            openWin:false,                     //报表是否有弹出详情页面<br>
            openurl:'list_zjxw.html',          //报表弹出详情页面地址<br>
            isWhat:'force1',                     //报表所用的格式<br>
            echartsAdd:'../../js/lib/echarts'  //echarts文件路径<br>
        });<br>
}); <br>
&lt;/script&gt;<br>
</p>    
</blockquote>
</div>
        
<!--CSS代码-->
<div id="css">
<blockquote class="vlight">
<p>
/* 暂无涉及的相关文件 */
</p>
</blockquote>
</div>
        
<!--JAVASCRIPT代码-->
<div id="java">
<blockquote class="vlight">
<p>
// JSON 数据格式<br>
{ <br>
    "categories": [  <br>
                {"name":"总网络","color":"#ff7f50"},<br>
                {"name":"分支1","color":"#87cdfa"},<br>
                {"name":"分支2","color":"#9acd32"}<br>
            ],<br>
    "nodes":[<br>
        {"category":0, "name": "总网络", "label": "总网络"},<br>
        {"category":1, "name": <br>"172.16.2.254","zjn":"路由1","dkh":"80"},<br>
        {"category":1, "name": <br>"172.16.1.253","zjn":"路由2","dkh":"90"},<br>
        {"category":1, "name": <br>"172.16.3.254","zjn":"路由3","dkh":"880"},<br>
        {"category":1, "name": <br>"172.16.5.250","zjn":"路由4","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.2.11","zjn":"PC1","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.2.15","zjn":"PC2","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.1.20","zjn":"PC4","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.1.89","zjn":"PC3","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.3.79","zjn":"PC7","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.3.99","zjn":"PC8","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.5.66","zjn":"PC5","dkh":"66"},<br>
        {"category":2, "name": <br>"172.16.5.44","zjn":"PC6","dkh":"66"}<br>
    ],<br>
    "links":[<br>
        {"source" : "172.16.2.254", "target" : "总网络", "weight" : 1, "name": "分支1"},<br>
        {"source" : "172.16.1.253", "target" : "总网络", "weight" : 1, "name": "分支2"},<br>
        {"source" : "172.16.3.254", "target" : "总网络", "weight" : 1, "name": "分支3"},<br>
        {"source" : "172.16.5.250", "target" : "总网络", "weight" : 1, "name": "分支4"},<br>
        {"source" : "172.16.2.11", "target" : "172.16.2.254","weight" : 1},<br>
        {"source" : "172.16.2.15", "target" : "172.16.2.254", "weight" : 1},<br>
        {"source" : "172.16.1.20", "target" : "172.16.1.253", "weight" : 1},<br>
        {"source" : "172.16.1.89", "target" : "172.16.1.253", "weight" : 1},<br>
        {"source" : "172.16.3.79", "target" : "172.16.3.254", "weight" : 1},<br>
        {"source" : "172.16.3.99", "target" : "172.16.3.254", "weight" : 1},<br>
        {"source" : "172.16.5.66", "target" : "172.16.5.250", "weight" : 1},<br>
        {"source" : "172.16.5.44", "target" : "172.16.5.250", "weight" : 1}<br>
    ]<br>
}  <br>
//公共代码<br>
$.fn.chartsObj = function(option){<br>
    var setting = {<br>
        typecharts:'bar',     //是什么类型的报表bar,line,pie等<br>
        jsonUrl:null,         //报表的JSON文件路径<br>
        tabID:null,           //调用报表的ID<br>
        trigger:null,         //报表的trigger类型<br>
        width:'98%',          //报表显示宽度<br>
        height:240,           //报表显示高度<br>
        openWin:null,         //报表是否有弹出详情页面<br>
        openurl:null,         //报表弹出详情页面地址<br>
        isWhat :null,         //报表所用的格式<br>
        lineType:true,        //判断是否有背景的线形图,true为有背景的，FALSE为无背景<br>
        echartsAdd:null       //echarts文件路径<br>
    };<br>
    option = $.extend(setting, option);    //合并参数<br>
    var tp = option.typecharts;<br>
    var jsonA = option.jsonUrl;<br>
    var ID = option.tabID;<br>
    var Tg = option.trigger;<br>
    var ou = option.openWin;<br>
    var Url = option.openurl;<br>
    
    require.config({<br>
        paths : {  <br>
            echarts : option.echartsAdd<br>
        }  <br>
    });  <br>
    require([ 'echarts', 'echarts/chart/'+tp]);<br>
    

    $(ID).BDChats.defaults = {<br>
            iWidth:option.width,<br>
            iHeight:option.height,<br>
            noAjax:true, //使用后台请求数据<br>
            loading : true, //加载层<br>
            hParams :{} //提交的参数<br>
    
    };<br>
    //类型<br>
    switch(option.isWhat){<br>
        case 'force1': //网络关系图<br>
            var categories = new Array();<br>
            var nodes = new Array();<br>
            var links = new Array();<br>
            var name;<br>
            $.ajaxSettings.async = false;<br>
            $.getJSON(jsonA, function (jsonArray) { <br>
                for(var a in jsonArray.categories){<br>
                    categories[a] = {name:jsonArray.categories[a].name,<br>
                                    itemStyle: {<br>
                                        normal: {<br>
                                            color : jsonArray.categories[a].color<br>
                                        }}<br>
                                    };<br>
                };<br>
                for(var b in jsonArray.nodes){<br>
                    nodes[b] = jsonArray.nodes[b];<br>
                };<br>
                for(var c in jsonArray.links){<br>
                    links[c] = jsonArray.links[c];<br>
                };<br>
                name = jsonArray.categories[0].name;<br>
            }); <br>
            forceShow(tp,ID,Tg,ou,categories,nodes,links,name,Url);     //网络关系图调用option函数   <br>
            break;<br>
    }<br>
    
}<br>
//关系图显示
function forceShow(tp,ID,Tg,ou,categories,nodes,links,name,Url){<br>
        var openDiv = function(){<br>
            var dialog = $.Layer.iframe(<br>
                {<br>
                    title: '查看详情',<br>
                    url: Url,<br>
                    width: 900,<br>
                    height: 550,<br>
                    button:false<br>
                });    <br> 
        }<br>
        $(ID).BDChats({<br>
            noAjax:true,<br>
            openUrl:ou,<br>
            series:[<br>
                {<br>
                    type:tp,<br>
                    name : name,<br>
                    ribbonType: false,<br>
                    categories:categories,<br>
                    itemStyle: {<br>
                        normal: {<br>
                            label: {<br>
                                show: true,<br>
                                textStyle: {<br>
                                    color: '#fff'<br>
                                }<br>
                            },<br>
                            nodeStyle : {<br>
                                brushType : 'both',<br>
                                borderColor : 'rgba(255,215,0,0.4)',<br>
                                borderWidth :5<br>
                            },<br>
                            linkStyle: {<br>
                                type: 'line'<br>
                            }<br>
                        },<br>
                        emphasis: {<br>
                            label: {<br>
                                show: false<br>
                                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE<br>
                            },<br>
                            nodeStyle : {<br>
                                //r: 30<br>
                            },<br>
                            linkStyle : {}<br>
                        }<br>
                    },<br>
                    useWorker: false,<br>
                    minRadius :35,<br>
                    maxRadius : 45,<br>
                    gravity: 1.1,<br>
                    scaling: 1.1,<br>
                    roam: 'move',<br>
                    nodes:nodes,<br>
                    links:links<br>
                }<br>
            ],<br>
            optUrl:openDiv<br>
            }).on('afterrender', function (e, charts, el,option) {<br>
                $('body').delegate('.reload','click',function(e){<br>
                });<br>
            }); <br>
}<br>
		
</p>
</blockquote>
</div>
        
        
<!--使用说明-->
<div id="date">
<blockquote class="vlight">
<p>
/* 数据等待添加 */

</p>
</blockquote>
</div>

        
        
            </div>

</div>

</body>
</html>
